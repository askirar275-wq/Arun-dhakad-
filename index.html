<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Galaxy Shooter</title>
<style>
*{
    margin:0; padding:0; box-sizing:border-box;
    user-select:none;
}
body{
    background:#000;
    overflow:hidden;
    font-family:Arial, sans-serif;
}

/* GAME AREA */
#game{
    width:100vw;
    height:100vh;
    background:url('https://i.ibb.co/jbQ9SWJ/galaxy-bg.jpg') center/cover;
    position:relative;
    overflow:hidden;
}

/* PLAYER */
.player{
    width:60px; 
    position:absolute;
    bottom:20px;
    left:50%;
    transform:translateX(-50%);
}
.player img{
    width:100%;
}

/* BULLETS */
.bullet{
    width:6px;
    height:15px;
    background:white;
    border-radius:4px;
    position:absolute;
}

/* ENEMY */
.enemy{
    width:60px;
    position:absolute;
}
.enemy img{
    width:100%;
}

/* SCORE */
#scoreBox{
    position:absolute;
    top:10px;
    left:10px;
    color:white;
    font-size:22px;
}

/* BUTTON */
.btn{
    position:absolute;
    bottom:20px;
    right:20px;
    padding:12px 25px;
    border:2px solid #fff;
    color:white;
    background:transparent;
    font-size:18px;
    border-radius:12px;
    cursor:pointer;
    transition:0.2s;
}
.btn:active{
    transform:scale(0.85);
    background:white;
    color:black;
}

/* MOBILE LEFT/RIGHT */
.control{
    width:80px;
    height:80px;
    border:2px solid #fff;
    border-radius:50%;
    position:absolute;
    bottom:20px;
    background:rgba(255,255,255,0.1);
    display:flex;
    justify-content:center;
    align-items:center;
    font-size:30px;
    color:white;
    backdrop-filter:blur(5px);
}
#left{ left:20px; }
#right{ left:120px; }
.control:active{
    transform:scale(0.85);
    background:white;
    color:black;
}

</style>
</head>
<body>

<div id="game">
    <div id="scoreBox">Score: 0</div>

    <!-- PLAYER -->
    <div class="player">
        <img src="https://i.ibb.co/9yb8P3Y/player-ship.png">
    </div>

    <!-- CONTROLS -->
    <div id="left" class="control">⟵</div>
    <div id="right" class="control">⟶</div>
    <button class="btn" id="shootBtn">FIRE</button>
</div>

<script>
const game = document.getElementById("game");
const player = document.querySelector(".player");
const scoreBox = document.getElementById("scoreBox");
let score = 0;
let playerX = window.innerWidth / 2;

let bullets = [];
let enemies = [];

/* PLAYER MOVE */
function movePlayer(){
    player.style.left = playerX + "px";
}
movePlayer();

/* SHOOT */
function shoot(){
    let b = document.createElement("div");
    b.className = "bullet";
    b.style.left = (playerX + 27) + "px";
    b.style.bottom = "70px";
    game.appendChild(b);
    bullets.push(b);
}
document.addEventListener("keydown", e=>{
    if(e.code === "Space") shoot();
});
document.getElementById("shootBtn").onclick = ()=> shoot();

/* CREATE ENEMY */
function spawnEnemy(){
    let e = document.createElement("div");
    e.className = "enemy";
    let x = Math.random() * (window.innerWidth - 60);
    e.style.left = x + "px";
    e.style.top = "-70px";
    e.innerHTML = `<img src="https://i.ibb.co/8nkG7Kg/enemy-ship.png">`;
    game.appendChild(e);
    enemies.push(e);
}
setInterval(spawnEnemy, 900);

/* GAME LOOP */
setInterval(()=>{

    /* MOVE BULLETS */
    bullets.forEach((b, i)=>{
        b.style.bottom = parseInt(b.style.bottom) + 10 + "px";
        if(parseInt(b.style.bottom) > window.innerHeight){
            b.remove();
            bullets.splice(i,1);
        }
    });

    /* MOVE ENEMIES */
    enemies.forEach((e,i)=>{
        e.style.top = parseInt(e.style.top) + 4 + "px";
        if(parseInt(e.style.top) > window.innerHeight){
            e.remove();
            enemies.splice(i,1);
        }

        /* COLLISION */
        bullets.forEach((b, bi)=>{
            const bR = b.getBoundingClientRect();
            const eR = e.getBoundingClientRect();

            if(!(bR.right < eR.left || 
                 bR.left > eR.right ||
                 bR.bottom < eR.top ||
                 bR.top > eR.bottom)){

                score++;
                scoreBox.innerText = "Score: " + score;

                b.remove();
                e.remove();
                bullets.splice(bi,1);
                enemies.splice(i,1);
            }
        });
    });
},20);

/* MOBILE CONTROLS */
document.getElementById("left").ontouchstart = ()=>{
    let x = setInterval(()=>{ playerX -= 8; movePlayer(); },10);
    document.getElementById("left").ontouchend = ()=> clearInterval(x);
};

document.getElementById("right").ontouchstart = ()=>{
    let x = setInterval(()=>{ playerX += 8; movePlayer(); },10);
    document.getElementById("right").ontouchend = ()=> clearInterval(x);
};

</script>

</body>
</html>
